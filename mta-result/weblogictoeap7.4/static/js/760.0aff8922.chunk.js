"use strict";(self.webpackChunkwindup_ui=self.webpackChunkwindup_ui||[]).push([[760],{25760:function(n,e,t){t.r(e),t.d(e,{default:function(){return dn}});var i=t(47313),r=t(97890),a=t(96093),s=t(24777),l=t(38477),o=t(60902),c=t(95677),d=t(54890),u=t(74165),h=t(15861),f=t(31881),p=t.n(f),x=t(44888),m=function(){return(0,x.z)({queryKey:["applications-details"],queryFn:function(){var n=(0,h.Z)((0,u.Z)().mark((function n(){return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p().get("/applications-details");case 2:return n.abrupt("return",n.sent.data);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()},undefined,window["applications-details"])},j=t(53566),g=t(4942),v=t(29439),y=t(42747),P=t(3460),F=t(74871),C=t(41094),T=t(76934),k=t(90555),M=t(22420),I=t(80752),b=t(36898),Z=t(14303),w=t(75071),S=t(89213),B=t(82685),H=t(70987),N=t(71602),A=t(56954),z=t(1413),E=t(52076),O=t(48441),V=t(95613),D=t(57736),R=t(98699),_=t(13056),q=t(67526),K=t(67482),W=t(46417),L=[{title:"Name",transforms:[(0,N.d)(40)],cellTransforms:[]},{title:"Tags",transforms:[(0,N.d)(20)],cellTransforms:[]},{title:"Issues",transforms:[],cellTransforms:[]},{title:"Story points",transforms:[],cellTransforms:[]}],G=function(n){var e,t=n.applicationFile,r=(0,A.dd)(),a=(0,i.useState)(""),s=(0,v.Z)(a,1)[0],l=(0,K.J)(),o=(0,q.W)(),c=(0,i.useMemo)((function(){return t.childrenFileIds.map((function(n){var e,t={id:n,fullPath:"",prettyPath:"",prettyFileName:"",hints:[],tags:[],classificationsAndHintsTags:[],sourceType:"",storyPoints:-1},i=null===(e=o.data)||void 0===e?void 0:e.find((function(e){return e.id===n}));return(0,z.Z)((0,z.Z)({},t),i)}))}),[o.data,t]),d=(0,i.useCallback)((function(n){return(l.data||[]).filter((function(n){return n.applicationId!==_.s})).flatMap((function(n){return n.issues})).filter((function(e){return e.affectedFiles.flatMap((function(n){return n.files})).find((function(e){return e.fileId===n}))}))}),[l.data]),u=(0,A.HL)(),h=u.page,f=u.sortBy,p=u.changePage,x=u.changeSortBy,m=(0,A.x6)({items:c,currentPage:h,currentSortBy:f,compareToByColumn:function(){return 0},filterItem:function(n){return!0}}),y=m.pageItems,F=m.filteredItems,C=function(n){var e=[];return n.forEach((function(n){var t,i=d(n.id)||[];e.push((t={},(0,g.Z)(t,"DataKey",n),(0,g.Z)(t,"cells",[{title:(0,W.jsx)(B.zx,{variant:"link",onClick:function(){return r.open("showFile",n)},children:(0,W.jsx)(E.k,{content:n.prettyFileName})})},{title:(0,W.jsxs)(O.k,{children:[n.tags.map((function(n){return(0,W.jsx)(V.B,{spacer:{default:"spacerXs"},children:(0,W.jsx)(P._,{color:"IMPORTANT"===n.level?"red":"grey",isCompact:!0,children:n.name})},n.name)})),n.classificationsAndHintsTags.map((function(n){return(0,W.jsx)(V.B,{spacer:{default:"spacerXs"},children:(0,W.jsx)(P._,{color:"grey",isCompact:!0,children:n})},n)}))]})},{title:(0,W.jsx)(b.aV,{component:b.ns.ol,type:b.mr.number,children:i.map((function(e,t){var i=e.affectedFiles.flatMap((function(n){return n.files})).filter((function(e){return e.fileId===n.id})).reduce((function(n,e){return n+e.occurrences}),0);return(0,W.jsxs)(Z.H,{children:[e.name," ",(0,W.jsx)(D.C,{isRead:!0,children:i})]},e.name)}))})},{title:n.storyPoints}]),t))})),e}(y);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(j.un,{variant:"compact",hasTopPagination:!0,hasBottomPagination:!0,totalCount:F.length,sortBy:f||{index:void 0,defaultDirection:"asc"},onSort:x,currentPage:h,onPageChange:p,rows:C,cells:L,actions:[],isLoading:o.isFetching,loadingVariant:"skeleton",fetchError:o.isError,filtersApplied:s.trim().length>0}),(0,W.jsx)(R.u,{title:"File ".concat(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.prettyFileName),isOpen:r.isOpen&&"showFile"===r.action,onClose:r.close,variant:"default",position:"top",disableFocusTrap:!0,actions:[(0,W.jsx)(B.zx,{variant:"primary",onClick:r.close,children:"Close"},"close")],children:r.data&&(0,W.jsx)(j.Mm,{file:r.data})})]})},X=t(93433),U=t(33707),J=t(63366),Q=t(58297),Y=t(38808),$=t(58944),nn=function(n){var e=n.applicationFile,t=(0,x.z)({queryKey:["tags"],queryFn:function(){var n=(0,h.Z)((0,u.Z)().mark((function n(){return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p().get("/tags");case 2:return n.abrupt("return",n.sent.data);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()},void 0,window.tags),r=(0,q.W)(),a=(0,i.useMemo)((function(){return e.flatMap((function(n){return n.childrenFileIds})).map((function(n){var e,t={id:n,fullPath:"",prettyPath:"",prettyFileName:"",hints:[],tags:[],classificationsAndHintsTags:[],sourceType:"",storyPoints:-1},i=null===(e=r.data)||void 0===e?void 0:e.find((function(e){return e.id===n}));return(0,z.Z)((0,z.Z)({},t),i)}))}),[r.data,e]),s=(0,i.useMemo)((function(){return a&&t.data?a.flatMap((function(n){return[].concat((0,X.Z)(n.tags.map((function(n){return n.name}))),(0,X.Z)(n.classificationsAndHintsTags))})).reduce((function(n,e){var i=function(n,e){var t=n.find((function(n){return n.name===e}));if(!t)return null;for(var i=[t],r=[],a=[e],s=t.isRoot?[t]:[];0!==i.length;){r=[];for(var l=0;l<i.length;l++)for(var o=i[l],c=function(e){var t=o.parentsTagNames[e];if(-1!==a.indexOf(t))return"continue";a.push(t);var i=n.find((function(n){return n.name===t}));i&&(i.isRoot?s.push(i):r.push(i))},d=0;d<o.parentsTagNames.length;d++)c(d);i=r}return s}(t.data,e);return null===i||void 0===i||i.forEach((function(e){var t,i=e.title||e.name;n.set(i,(null!==(t=n.get(i))&&void 0!==t?t:0)+1)})),n}),new Map):new Map}),[a,t.data]);return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)("div",{style:{height:"250px",width:"600px"},children:(0,W.jsxs)(U.k,{containerComponent:(0,W.jsx)(J.H,{labels:function(n){var e=n.datum;return"".concat(e.y)},constrainToVisibleArea:!0}),height:250,width:600,padding:{bottom:50,left:200,right:10,top:10},domainPadding:{x:[15,15]},children:[(0,W.jsx)(Q.C,{}),(0,W.jsx)(Q.C,{dependentAxis:!0}),(0,W.jsx)(Y.G,{offset:11,horizontal:!0,children:(0,W.jsx)($.B,{data:Array.from(s.keys()).sort().map((function(n){return{name:"Tag",x:n,y:s.get(n)}}))})})]})})})},en="DataKey",tn=[{title:"File name",transforms:[(0,N.d)(90)],cellTransforms:[]},{title:"Story points",transforms:[(0,N.d)(10)],cellTransforms:[]}],rn=function(n){var e=n.application,t=(0,i.useState)(""),r=(0,v.Z)(t,1)[0],a=m(),u=(0,i.useMemo)((function(){var n,t;return(null===(n=a.data)||void 0===n||null===(t=n.find((function(n){return n.applicationId===(null===e||void 0===e?void 0:e.id)})))||void 0===t?void 0:t.applicationFiles)||[]}),[a.data,e]),h=(0,y.Uq)({items:u,isEqual:function(n,e){return n.fileId===e.fileId}}),f=h.isItemSelected,p=h.toggleItemSelected,x=h.selectAll,N=h.setSelectedItems,z=(0,A.HL)(),E=z.page,O=z.sortBy,V=z.changePage,D=z.changeSortBy,R=(0,A.x6)({items:u,currentPage:E,currentSortBy:O,compareToByColumn:function(){return 0},filterItem:function(n){return!0}}),_=R.pageItems,q=R.filteredItems,K=function(n){var e=[];return n.forEach((function(n){var t,i,r,a,u=f(n);(e.push((i={},(0,g.Z)(i,en,n),(0,g.Z)(i,"isOpen",u),(0,g.Z)(i,"cells",[{title:(0,W.jsxs)(W.Fragment,{children:[n.maven.duplicatePaths?n.fileName:n.rootPath," ",(null===(t=n.maven.duplicatePaths)||void 0===t?void 0:t.length)&&(0,W.jsx)(P._,{isCompact:!0,color:"blue",icon:(0,W.jsx)(H.ZP,{}),children:"Included multiple times"})]})},{title:n.storyPoints}]),i)),u)&&e.push({parent:e.length-1,fullWidth:!0,noPadding:!0,cells:[{title:(0,W.jsx)("div",{className:"pf-u-m-md",children:(0,W.jsxs)(F.K,{children:[(0,W.jsx)(C.v,{className:"pf-u-mx-lg",children:(0,W.jsxs)(s.r,{hasGutter:!0,lg:6,children:[(0,W.jsx)(l.P,{children:(0,W.jsxs)(T.o,{isHorizontal:!0,isCompact:!0,children:[(0,W.jsxs)(k.g,{children:[(0,W.jsx)(M.M,{children:"Story points"}),(0,W.jsx)(I.b,{children:n.storyPoints})]}),(0,W.jsxs)(k.g,{children:[(0,W.jsx)(M.M,{children:"Maven coordinates"}),(0,W.jsx)(I.b,{children:n.maven.mavenIdentifier})]}),(0,W.jsxs)(k.g,{children:[(0,W.jsx)(M.M,{children:"Organization"}),(0,W.jsx)(I.b,{children:(0,W.jsx)(b.aV,{isPlain:!0,children:null===(r=n.maven.organizations)||void 0===r?void 0:r.map((function(n){return(0,W.jsx)(Z.H,{children:n},n)}))})})]}),(0,W.jsxs)(k.g,{children:[(0,W.jsx)(M.M,{children:"Name"}),(0,W.jsx)(I.b,{children:n.maven.name})]}),(0,W.jsxs)(k.g,{children:[(0,W.jsx)(M.M,{children:"Version"}),(0,W.jsx)(I.b,{children:n.maven.version})]}),(0,W.jsxs)(k.g,{children:[(0,W.jsx)(M.M,{children:"Links"}),(0,W.jsx)(I.b,{children:(0,W.jsxs)(b.aV,{isPlain:!0,children:[n.maven.projectSite&&(0,W.jsx)(Z.H,{children:(0,W.jsx)("a",{target:"_blank",rel:"noreferrer",href:n.maven.projectSite,children:"Project site"})}),n.maven.sha1&&(0,W.jsx)(Z.H,{children:(0,W.jsx)("a",{target:"_blank",rel:"noreferrer",href:'http://search.maven.org/?eh#search|ga|1|1:"'.concat(n.maven.sha1,'"'),children:"Maven Central"})})]})})]}),(0,W.jsxs)(k.g,{children:[(0,W.jsx)(M.M,{children:"Description"}),(0,W.jsx)(I.b,{children:n.maven.description})]}),(0,W.jsxs)(k.g,{children:[(0,W.jsx)(M.M,{children:"Duplicates"}),(0,W.jsx)(I.b,{children:(0,W.jsx)(b.aV,{children:null===(a=n.maven.duplicatePaths)||void 0===a?void 0:a.map((function(n,e){return(0,W.jsx)(Z.H,{children:n},e)}))})})]})]})}),(0,W.jsx)(l.P,{children:(0,W.jsxs)(o.Z,{isPlain:!0,isCompact:!0,children:[(0,W.jsx)(c.l,{children:"Tags found - Occurrence found"}),(0,W.jsx)(d.e,{children:(0,W.jsx)(nn,{applicationFile:[n]})})]})})]})}),(0,W.jsx)(C.v,{children:(0,W.jsx)(G,{applicationFile:n})})]})})}]})})),e}(_);return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(o.Z,{children:[(0,W.jsx)(c.l,{children:"Archive files"}),(0,W.jsx)(d.e,{children:(0,W.jsx)(j.un,{hasTopPagination:!0,hasBottomPagination:!0,totalCount:q.length,onCollapse:function(n,e,t,i){var r=function(n){return n.DataKey}(i);p(r)},sortBy:O||{index:void 0,defaultDirection:"asc"},onSort:D,currentPage:E,onPageChange:V,rows:K,cells:tn,actions:[],isLoading:a.isFetching,loadingVariant:"skeleton",fetchError:a.isError,filtersApplied:r.trim().length>0,toolbarToggle:(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(w.k,{variant:"button-group",children:[(0,W.jsx)(S.E,{children:(0,W.jsx)(B.zx,{variant:B.Wu.link,onClick:function(){return N([])},children:"Collapse all"})}),(0,W.jsx)(S.E,{children:(0,W.jsx)(B.zx,{variant:B.Wu.link,onClick:function(){return x()},children:"Expand all"})})]})})})})]})})},an=t(39275),sn=t(60171),ln=t(69366),on=t(7872),cn=function(n){var e=n.application,t=m(),r=(0,i.useMemo)((function(){var n;return null===(n=t.data)||void 0===n?void 0:n.find((function(n){return n.applicationId===(null===e||void 0===e?void 0:e.id)}))}),[t.data,e]),a=(0,A.dd)();return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(an.X,{children:(0,W.jsx)(sn.p,{children:null===r||void 0===r?void 0:r.messages.map((function(n,e){return(0,W.jsx)(ln.Tr,{children:(0,W.jsxs)(on.Td,{children:[n.value," ",(0,W.jsx)(B.zx,{variant:B.Wu.link,onClick:function(){return a.open("showRule",n.ruleId)},children:"View rule"})]})},e)}))})}),(0,W.jsx)(R.u,{title:"Rule: ".concat(null===a||void 0===a?void 0:a.data),isOpen:a.isOpen&&"showRule"===a.action,onClose:a.close,variant:"large",children:a.data&&(0,W.jsx)(j.sd,{ruleId:a.data})})]})},dn=function(){var n=(0,r.bx)(),e=m(),t=(0,i.useMemo)((function(){var t,i;return(null===(t=e.data)||void 0===t||null===(i=t.find((function(e){return e.applicationId===(null===n||void 0===n?void 0:n.id)})))||void 0===i?void 0:i.applicationFiles)||[]}),[e.data,n]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(a.NP,{children:(0,W.jsxs)(s.r,{hasGutter:!0,md:6,children:[(0,W.jsx)(l.P,{children:(0,W.jsxs)(o.Z,{isFullHeight:!0,children:[(0,W.jsx)(c.l,{children:"Tags found - Occurrence found"}),(0,W.jsx)(d.e,{children:(0,W.jsx)(nn,{applicationFile:t})})]})}),(0,W.jsx)(l.P,{children:(0,W.jsxs)(o.Z,{isFullHeight:!0,children:[(0,W.jsx)(c.l,{children:"Messages"}),(0,W.jsx)(d.e,{children:n&&(0,W.jsx)(cn,{application:n})})]})})]})}),(0,W.jsx)(a.NP,{children:n&&(0,W.jsx)(j.Uf,{application:n})}),(0,W.jsx)(a.NP,{children:n&&(0,W.jsx)(rn,{application:n})})]})}}}]);